<div class="container mx-auto px-4 py-8">
  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <div class="flex items-center gap-4">
      <%= link_to admin_appointments_path, class: "btn btn-ghost btn-sm" do %>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
      <% end %>
      <div>
        <h1 class="text-3xl font-bold text-base-content"><%= @appointment.name %></h1>
        <p class="text-base-content/70">Compromisso criado em <%= l(@appointment.created_at, format: :long) %></p>
      </div>
    </div>
    
    <div class="flex gap-2">
      <%= link_to edit_admin_appointment_path(@appointment), 
          class: "btn btn-primary", 
          data: { turbo_frame: "_top" } do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
        </svg>
        Editar
      <% end %>
      
      <%= button_to admin_appointment_path(@appointment), 
          method: :delete,
          class: "btn btn-error btn-outline",
          form: { 
            data: { 
              controller: "confirm-delete",
              confirm_delete_item_name_value: @appointment.name,
              confirm_delete_item_type_value: "o compromisso",
              confirm_delete_confirm_text_value: "Sim, Remover Compromisso",
              confirm_delete_additional_info_value: "Este compromisso será permanentemente excluído."
            }
          } do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>
        Remover
      <% end %>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Informações Principais -->
    <div class="lg:col-span-2 space-y-6">
      <!-- Detalhes do Compromisso -->
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
          <h2 class="card-title flex items-center">
            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4m-6 9l2 2 4-4m6-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Detalhes do Compromisso
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="md:col-span-2">
              <div class="text-sm text-base-content/70 mb-1">Nome do Compromisso</div>
              <div class="text-lg font-semibold"><%= @appointment.name %></div>
            </div>
            
            <div>
              <div class="text-sm text-base-content/70 mb-1">Data de Início</div>
              <div class="text-lg">
                <%= l(@appointment.start_time, format: "%d/%m/%Y") %>
              </div>
            </div>
            
            <div>
              <div class="text-sm text-base-content/70 mb-1">Horário de Início</div>
              <div class="text-lg font-mono">
                <%= l(@appointment.start_time, format: "%H:%M") %>
              </div>
            </div>
            
            <div>
              <div class="text-sm text-base-content/70 mb-1">Data de Término</div>
              <div class="text-lg">
                <%= l(@appointment.end_time, format: "%d/%m/%Y") %>
              </div>
            </div>
            
            <div>
              <div class="text-sm text-base-content/70 mb-1">Horário de Término</div>
              <div class="text-lg font-mono">
                <%= l(@appointment.end_time, format: "%H:%M") %>
              </div>
            </div>
            
            <div>
              <div class="text-sm text-base-content/70 mb-1">Duração</div>
              <div class="text-lg">
                <%= @appointment.duration %> horas
              </div>
            </div>
            
            <div>
              <div class="text-sm text-base-content/70 mb-1">Status Atual</div>
              <div>
                <% status_class = case @appointment.status
                     when 'upcoming' then 'badge-info'
                     when 'ongoing' then 'badge-warning'
                     when 'past' then 'badge-ghost'
                     else 'badge-ghost'
                   end %>
                <div class="badge <%= status_class %> text-lg">
                  <%= case @appointment.status
                      when 'upcoming' then 'Próximo'
                      when 'ongoing' then 'Em andamento'
                      when 'past' then 'Passado'
                      else @appointment.status
                      end %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Período do Compromisso -->
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
          <h2 class="card-title flex items-center">
            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Período do Compromisso
          </h2>
          
          <div class="space-y-4">
            <div class="flex items-center justify-between p-4 bg-base-200 rounded-lg">
              <div>
                <div class="font-semibold">Início</div>
                <div class="text-sm text-base-content/70">
                  <%= l(@appointment.start_time, format: "%A, %d de %B de %Y às %H:%M") %>
                </div>
              </div>
              <div class="text-right">
                <div class="font-semibold">Término</div>
                <div class="text-sm text-base-content/70">
                  <%= l(@appointment.end_time, format: "%A, %d de %B de %Y às %H:%M") %>
                </div>
              </div>
            </div>
            
            <% if @appointment.status == 'upcoming' %>
              <div class="alert alert-info">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span>Este compromisso está agendado para o futuro.</span>
              </div>
            <% elsif @appointment.status == 'ongoing' %>
              <div class="alert alert-warning">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                </svg>
                <span>Este compromisso está acontecendo agora!</span>
              </div>
            <% elsif @appointment.status == 'past' %>
              <div class="alert">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span>Este compromisso já foi concluído.</span>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="space-y-6">
      <!-- Status -->
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
          <h3 class="card-title text-lg">Status</h3>
          
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <span class="text-sm">Status do compromisso</span>
              <% status_class = case @appointment.status
                   when 'upcoming' then 'badge-info'
                   when 'ongoing' then 'badge-warning'
                   when 'past' then 'badge-ghost'
                   else 'badge-ghost'
                 end %>
              <div class="badge <%= status_class %>">
                <%= case @appointment.status
                    when 'upcoming' then 'Próximo'
                    when 'ongoing' then 'Em andamento'
                    when 'past' then 'Passado'
                    else @appointment.status
                    end %>
              </div>
            </div>
            
            <div class="divider my-2"></div>
            
            <div class="text-sm space-y-2">
              <div class="flex justify-between">
                <span class="text-base-content/70">Criado em:</span>
                <span><%= l(@appointment.created_at, format: :short) %></span>
              </div>
              
              <% if @appointment.updated_at != @appointment.created_at %>
                <div class="flex justify-between">
                  <span class="text-base-content/70">Atualizado em:</span>
                  <span><%= l(@appointment.updated_at, format: :short) %></span>
                </div>
              <% end %>
              
              <div class="flex justify-between">
                <span class="text-base-content/70">Duração:</span>
                <span><%= @appointment.duration %> horas</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ações Rápidas -->
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
          <h3 class="card-title text-lg">Ações Rápidas</h3>
          
          <div class="space-y-2">
            <%= link_to edit_admin_appointment_path(@appointment), 
                class: "btn btn-outline btn-sm w-full justify-start" do %>
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
              </svg>
              Editar Compromisso
            <% end %>
            
            <%= link_to new_admin_appointment_path, 
                class: "btn btn-outline btn-sm w-full justify-start" do %>
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
              Novo Compromisso
            <% end %>
            
            <%= link_to admin_appointments_path, 
                class: "btn btn-outline btn-sm w-full justify-start" do %>
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
              </svg>
              Listar Compromissos
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
